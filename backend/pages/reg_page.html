<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Login</title>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
    integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  <!-- <link rel="stylesheet" href="/css/custom.css"> -->
</head>

<body>
  <div class="containter">

    <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
      <a href="#" class="navbar-brand"><i class="fas fa-lock"> Password Encryptor</i></a>
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a href="#" class="nav-link">Saved Passwords</a>
        </li>
        <li class="nav-item">
          <a href="encrypt.html" class="nav-link">Create Password</a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link">Link 3</a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link">Link 4</a>
        </li>
      </ul>

      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <button href="#" id="Button" class="nav-link" style="background-color: transparent;color: grey"><i class="far fa-user">   Login</i></button>
        </li>
      </ul>
    </nav>

    <div class="modal-dialog text-center">
      <div class="col-md-10 offset-md-1">
        <div class="modal-content">
          <br>
          <form>
            <div class="form-group col-12">
              <label for="username1"><i class="far fa-user"></i> Username</label>
              <input type="text" class="form-control" id="username1" aria-describedby="emailHelp"
                placeholder="Enter Username">
            </div>
            <div class="form-group col-12">
              <label for="password1"><i class="fas fa-lock"></i> Password</label>
              <input type="password" class="form-control" id="password1" placeholder="Enter Password">
            </div>
            <button type="submit" id="login-button" class="btn btn-dark"><i class="fas fa-sign-in-alt"></i>
              Submit</button>
          </form>
          <br>
          <br>

        </div>
      </div>
    </div>

  </div>
  <script>

    function login() {
      // Grab whatever the user typed in to the username and password fields.

      const username = document.getElementById('username1').value;
      const password = document.getElementById('password1').value;

      // To make a request to our backend, we have to make a HTTP request
      // Define the method (GET,POST, UPDATE, DELETE)
      // If POST request, define the content type (what data type is the information you're sending in going to be )
      // If POST request, send in that information via the body 
      fetch('http://localhost:3000/new', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ username: username, password: password })
      })
        // Convert response body to json (it was a readable stream)
        .then(response => response.json())
        .then(body => {
          console.log(body);
            // Redirect user on button click 
            window.location.href = "/Encryption";

        })
        .catch(err => console.log(err));
    }

    document.getElementById('login-button').addEventListener('click', (event) => {

      // Prevent refresh that happens automatically after submitting a form 
      event.preventDefault();
      login();
    })

  </script>
  <script>
      // onclick event is assigned to the #button element.
      document.getElementById("Button").onclick = function() {
        window.location.href = "/Login";
      };
      
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
</body>


</html>